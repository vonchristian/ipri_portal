<% if @criminalizations.present? %>
  <div class="max-w-7xl mx-auto sm:px-6 lg:px-8 py-8">
    <div class="flex items-center justify-between mb-6 flex-wrap gap-4">
      <h1 class="text-xl font-bold text-gray-900">Criminalizations</h1>
      <%= link_to 'Add New', new_documenters_case_detail_criminalization_path(case_detail),
        class: "inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition ml-5 mr-5" %>
    </div>

    <% @criminalizations.each_with_index do |criminalization, indx| %>
      <%= link_to documenters_case_detail_criminalization_path(case_detail_id: case_detail.id, id: criminalization.id),
        class: "block mb-6 border border-gray-200 shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600 transition bg-white p-6" do %>

       <div class="flex justify-between items-center mb-2">
  <h2 class="text-lg font-semibold text-gray-800">Case #<%= indx + 1 %></h2>

  <% if criminalization.victims_in_detention.to_s.downcase.in?(%w[yes true 1]) %>
    <span class="inline-block bg-red-600 text-white text-xs font-semibold px-3 py-1 rounded-full">
      In Detention
    </span>
  <% end %>
</div>
        <div class="text-sm text-gray-700 space-y-2">
          <p><span class="font-medium text-gray-900">Reason:</span> <%= criminalization.criminalization_details %></p>

          <% if criminalization.experienced_harrassment_or_intimidation.present? %>
            <p><span class="font-medium text-gray-900">Harassment before criminalization:</span> <%= criminalization.experienced_harrassment_or_intimidation %></p>
          <% end %>

          <% if criminalization.accusation_or_charges_details.present? %>
            <p><span class="font-medium text-gray-900">Accusations:</span> <%= criminalization.accusation_or_charges_details %></p>
          <% end %>

          <% if criminalization.policies_or_laws_used.present? %>
            <p><span class="font-medium text-gray-900">Legal basis:</span> <%= criminalization.policies_or_laws_used %></p>
          <% end %>

          <% if criminalization.accuser_categories.present? %>
            <p><span class="font-medium text-gray-900">Accusers:</span> <%= criminalization.accuser_categories.pluck(:title).join(", ") %></p>
          <% end %>

          <% if criminalization.case_filing_status.present? %>
            <p><span class="font-medium text-gray-900">Case filed:</span> <%= criminalization.case_filing_status %></p>
          <% end %>

          <% if criminalization.case_decision_status.present? %>
            <p><span class="font-medium text-gray-900">Decision status:</span> <%= criminalization.case_decision_status %></p>
          <% end %>

          <% if criminalization.victims_in_detention.present? %>
            <p><span class="font-medium text-gray-900">In detention:</span> <%= criminalization.victims_in_detention %></p>
          <% end %>

          <% if criminalization.impact_to_victim_details.present? %>
            <p><span class="font-medium text-gray-900">Impact on victim:</span> <%= criminalization.impact_to_victim_details %></p>
          <% end %>

          <% if criminalization.impact_to_community_details.present? %>
            <p><span class="font-medium text-gray-900">Impact on community:</span> <%= criminalization.impact_to_community_details %></p>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>
<% else %>
  <div class="max-w-4xl mx-auto px-4 py-10 text-center">
    <p class="text-gray-600 mb-4">No criminalizations found.</p>
    <%= link_to 'Add New', new_documenters_case_detail_criminalization_path(case_detail),
      class: "text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5" %>
  </div>
<% end %>
